<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>å‰åœåŠ›é¢¨æ ¼è–èª•æ¨¹</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
  margin:0;
  background:linear-gradient(#1a2a3a,#0e1824);
  overflow:hidden;
  font-family:system-ui,-apple-system,sans-serif;
  color:white;
}
.controls{
  position:fixed;
  left:20px;
  top:20px;
  background:rgba(30,40,60,.75);
  padding:16px;
  border-radius:18px;
  font-size:14px;
  box-shadow:0 10px 30px rgba(0,0,0,.5);
  z-index:10;
}
</style>
</head>

<body>

<div class="controls">
  <strong>ğŸŒ² è£é£¾è–èª•æ¨¹</strong><br>
  ğŸ‘‰ æ‹–å½©å¸¶ / è£é£¾å°çƒ<br>
  ğŸ‘‰ é»æ¨¹ä¸Šæ–°å¢å°çƒ
</div>

<canvas id="c"></canvas>

<script>
const canvas = document.getElementById("c");
const ctx = canvas.getContext("2d");
const CX = ()=>canvas.width/2;

function resize(){
  canvas.width = innerWidth;
  canvas.height = innerHeight;
}
resize(); addEventListener("resize", resize);

/* ğŸŒ² æ¨¹å½¢åƒæ•¸ï¼ˆå‰åœåŠ›æ¯”ä¾‹ï¼‰ */
const treeTop = 170;
const treeBottom = 380;
const maxWidth = 300;

function treeWidthAt(y){
  const t = (y-treeTop)/(treeBottom-treeTop);
  return maxWidth*(1-t*0.85);
}

/* ğŸ€ å½©å¸¶ï¼ˆå¯æ‹–ï¼‰ */
const ribbons=[
  {y:255,offset:0},
  {y:305,offset:0},
  {y:355,offset:0}
];

/* ğŸ”´ è£é£¾å°çƒ */
const balls=[
  {x:-40,y:270,r:9},
  {x:30,y:315,r:10}
];

let dragging=null, type=null;

/* â­ äº”è§’æ˜Ÿå‹•ç•« */
let starPulse=1,dir=0.006;

/* ğŸ–± äº’å‹• */
canvas.onmousedown=e=>{
  const x=e.offsetX,y=e.offsetY;

  ribbons.forEach(r=>{
    if(Math.abs(y-r.y)<10){ dragging=r; type="ribbon"; }
  });

  balls.forEach(b=>{
    if(Math.hypot(x-(CX()+b.x),y-b.y)<b.r+6){
      dragging=b; type="ball";
    }
  });
};

canvas.onmousemove=e=>{
  if(!dragging) return;
  if(type==="ribbon") dragging.offset=e.offsetX-CX();
  if(type==="ball"){
    dragging.x=e.offsetX-CX();
    dragging.y=e.offsetY;
  }
};

canvas.onmouseup=e=>{
  if(!dragging){
    const y=e.offsetY;
    if(y>treeTop && y<treeBottom){
      balls.push({
        x:e.offsetX-CX(),
        y,
        r:8+Math.random()*3
      });
    }
  }
  dragging=null; type=null;
};

/* ğŸŒ¿ æ‰‹ç¹ªæ¨¹è‘‰ */
function softLeaf(y,w,h,color){
  ctx.fillStyle=color;
  ctx.shadowColor="rgba(0,0,0,.25)";
  ctx.shadowBlur=14;
  ctx.beginPath();
  ctx.moveTo(CX(),y-h);
  ctx.bezierCurveTo(CX()-w/2,y-h/2,CX()-w/2,y+h/2,CX(),y+h);
  ctx.bezierCurveTo(CX()+w/2,y+h/2,CX()+w/2,y-h/2,CX(),y-h);
  ctx.fill();
}

/* â­ äº”è§’æ˜Ÿ */
function drawStar(){
  starPulse+=dir;
  if(starPulse>1.2||starPulse<0.85)dir*=-1;

  ctx.save();
  ctx.translate(CX(),treeTop-22);
  ctx.scale(starPulse,starPulse);
  ctx.fillStyle="#fff3b0";
  ctx.shadowColor="#fff3b0";
  ctx.shadowBlur=35;
  ctx.beginPath();
  for(let i=0;i<5;i++){
    ctx.lineTo(Math.cos((18+i*72)*Math.PI/180)*14,
               -Math.sin((18+i*72)*Math.PI/180)*14);
    ctx.lineTo(Math.cos((54+i*72)*Math.PI/180)*6,
               -Math.sin((54+i*72)*Math.PI/180)*6);
  }
  ctx.fill();
  ctx.restore();
}

/* ğŸ€ å½©å¸¶ï¼ˆè²¼æ¨¹ï¼‰ */
function drawRibbons(){
  ctx.strokeStyle="#f2cc8f";
  ctx.lineWidth=4.5;
  ctx.lineCap="round";

  ribbons.forEach(r=>{
    const w=treeWidthAt(r.y)/2;
    ctx.beginPath();
    ctx.moveTo(CX()-w+r.offset*0.2,r.y);
    ctx.quadraticCurveTo(CX()+r.offset,r.y-18,CX()+w+r.offset*0.2,r.y);
    ctx.stroke();
  });
}

/* ğŸ”´ è£é£¾å°çƒ */
function drawBalls(){
  balls.forEach(b=>{
    ctx.fillStyle="#e07a5f";
    ctx.shadowColor="rgba(255,255,255,.6)";
    ctx.shadowBlur=10;
    ctx.beginPath();
    ctx.arc(CX()+b.x,b.y,b.r,0,Math.PI*2);
    ctx.fill();

    ctx.fillStyle="rgba(255,255,255,.35)";
    ctx.beginPath();
    ctx.arc(CX()+b.x-b.r/3,b.y-b.r/3,b.r/3,0,Math.PI*2);
    ctx.fill();
  });
  ctx.shadowBlur=0;
}

/* â„ èƒŒæ™¯é›ª */
const snow=Array.from({length:120},()=>({
  x:Math.random()*innerWidth,
  y:Math.random()*innerHeight,
  s:Math.random()*0.5+0.3
}));

function drawBG(){
  ctx.fillStyle="white";
  snow.forEach(s=>{
    s.y+=s.s;
    if(s.y>canvas.height) s.y=0;
    ctx.beginPath();
    ctx.arc(s.x,s.y,1.4,0,Math.PI*2);
    ctx.fill();
  });
}

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  drawBG();
  drawStar();
  softLeaf(220,180,70,"#5f8f7a");
  softLeaf(280,240,80,"#4f7f6a");
  softLeaf(350,300,95,"#3f6f5a");
  drawRibbons();
  drawBalls();
  requestAnimationFrame(draw);
}
draw();
</script>

</body>
</html>
